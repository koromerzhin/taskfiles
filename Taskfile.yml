version: '3'

# Taskfile principal - T√¢ches globales et inclusions
# Charge automatiquement les variables depuis le fichier .env s'il existe
dotenv: [ '.env' ]

includes:
  docker: ./docker/Taskfile.yml
  utils: ./utils/Taskfile.yml
  env: ./env/Taskfile.yml

vars:
  # Variables avec valeurs par d√©faut depuis .env ou valeurs de fallback
  PROJECT_NAME: '{{.PROJECT_NAME | default "taskfiles-collection"}}'
  PROJECT_VERSION: '{{.PROJECT_VERSION | default "1.0.0"}}'
  ENVIRONMENT: '{{.ENVIRONMENT | default "development"}}'

tasks:
  default:
    desc: "Affiche l'aide et les t√¢ches disponibles"
    silent: true
    cmds:
    - echo "üõ†Ô∏è  {{.PROJECT_NAME}} v{{.PROJECT_VERSION}} - Collection de Taskfiles"
    - echo "Environnement:" {{.ENVIRONMENT}}
    - echo ""
    - echo "T√¢ches globales disponibles :"
    - task --list
    - echo ""
    - echo "Pour voir les t√¢ches d'une technologie sp√©cifique :"
    - echo "  task utils --list # T√¢ches utilitaires"
    - echo "  task docker --list # T√¢ches Docker"
    - echo ""

  help:
    desc: "Affiche l'aide d√©taill√©e"
    aliases: [ h ]
    cmds:
    - task: default
